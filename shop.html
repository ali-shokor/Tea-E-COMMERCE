<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Category</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        <link rel="stylesheet" href="home.css">
        <link rel="stylesheet" href="category_view.css">
        <link rel="stylesheet" href="shop.css">
        <link rel="icon" type="image/png" href="static/tea8.png">

    </head>
    <body>
        <header>
            <nav>
                <ul>
                    <li class="logo-container">
                        <div class="logo-box">
                            <div class="logo"></div>
                        </div>
                    </li>
                    <li class="nav-links">
                        <a href="home.html">Home</a>
                        <a href="shop.html">Shop</a>
                    </li>
                    <!-- <li class="nav-links">
                        <a href="cart.html">Cart</a>
                    </li> -->
                    <li class="search-container">
                        <input type="search" autofocus aria-label="Search" class="search-input"  placeholder="Search Your Product...">
                    </li>
                    <li class="right-nav">
                        <a href="cart.html">
                            <div class="cart-box">
                                <div class="cart"></div>
                            </div>
                        </a>
                        <a href="index.html">
                            <div class="profile-box">
                                <div class="profile-pic"></div>
                            </div>
                        </a>
                    </li>
                </ul>
            </nav>
        </header>

        <h1 id="category-title">Search Result</h1>
        <div class="shop-options">
            <button class="search-button shop-option-button">SEARCH</button>
            <button id="allButton" class="shop-option-button" style="padding: 12px;">ALL</button>
            <button class="green-tea shop-option-button">GREEN TEA</button>
            <button class="white-tea shop-option-button">WHITE TEA</button>
            <button class="black-tea shop-option-button">BLACK TEA</button>
            <button class="herbal-tea shop-option-button">HERBAL TEA</button>
            <button class="matcha-tea shop-option-button">MATCHA BLENDS</button>
            <button class="roobios-tea shop-option-button">ROOBIOS & HONEY BUSH</button>
            <button class="fruit-tea shop-option-button">FRUIT BLENDS</button>
            <button class="premium-tea shop-option-button">PREMIUM OOLANG</button>
        </div>
        <div class="product-grid" id="content"></div>

        <footer class="footer">
            <div class="container1">
                <div class="socail">
                    <ul class="social-icons">
                        <li><a href="https://facebook.com" target="_blank"><i class="fa fa-facebook"></i> Facebook</a></li>
                        <li><a href="https://instagram.com" target="_blank"><i class="fa fa-instagram"></i> Instagram</a></li>
                    </ul>
                </div>
                <div class="contacts">
                    <ul>
                        <li><a href="#">Contact</a></li>
                        <li><a href="#">Refunds & Replacement</a></li>
                        <li><a href="#">About Tea House </a></li>
                    </ul>
                </div>
                <div class="more-info">
                    <ul>
                        <li><i class="fa fa-map-marker"></i>First Branch Location</li>
                        <li><i class="fa fa-map-marker"></i>Second Branch Location</li>
                        <li><i class="fa fa-phone"></i> 00961 78 957416</li>
                        <li><i class="fa fa-envelope"></i> alishokermana@gmail.com</li>
                    </ul>
                </div>
                <div class="footer-section">
                    <ul>
                        <li>Shipping All Over Lebanon</li>
                        <li>Delivery within two working days.</li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>Copyright Tea & Tonic | by Ali Shokor</p>
            </div>
    
        </footer>

        <script>
            
            document.addEventListener('DOMContentLoaded', () => {

                const buttons = document.querySelectorAll('.shop-option-button');
                const searchButton = document.querySelector('search-button')
                const allButton = document.getElementById('allButton');
                const greenTea = document.querySelector('.green-tea');
                const whiteTea = document.querySelector('.white-tea');
                const blackTea = document.querySelector('.black-tea');
                const herbalTea = document.querySelector('.herbal-tea');
                const matchaTea = document.querySelector('.matcha-tea');
                const roobiosTea = document.querySelector('.roobios-tea');
                const fruitTea = document.querySelector('.fruit-tea');
                const premiumTea = document.querySelector('.premium-tea');

                const contentDiv = document.getElementById('content');
            
                
                // Set "ALL" button as focused by default
                allButton.classList.add('selected');
            
                buttons.forEach(button => {
                    button.addEventListener('click', () => {
                        buttons.forEach(btn => {
                            btn.classList.remove('selected');
                        });
                        button.classList.add('selected');
                    });
                });
            
                const sampleData = {
                    greentea: [
                        { id: 1, name: "Cinnamon Orange Green tea", price: 15, image: "static/CinnamonOrange.png" },
                        { id: 2, name: "Turmeric Matcha", price: 15, image: "static/Turmeric_Matcha.png" },
                        { id: 3, name: "Earl Grey Green Tea", price: 15, image: "static/EarlGreyGreen.png" },
                        { id: 4, name: "Ginger Pineapple Green Tea", price: 15, image: "static/GingerPineApple.png" },
                        { id: 5, name: "Vitalitea'l Green Tea", price: 15, image: "static/Vitality.png" },
                        { id: 6, name: "Matcha Berries", price: 15, image: "static/Matcha_Berries.png" },
                    ],
                    blacktea: [
                        { id: 7, name: "BLACK CURRANT SENCHA BLACK TEA", price: 15, image: "static/BlackCurrentGreen.png" },
                        { id: 8, name: "BLUE FLOWER EARL GREY BLACK TEA", price: 15, image: "static/BlueFlower.png" },
                        { id: 9, name: "VANILLA CLASSIC BLACK TEA", price: 15, image: "static/VANILLA-CLASSIC.png" },
                        { id: 10, name: "FINEST GOLDEN TIPS PREMIUM BLACK TEA", price: 30, image: "static/Golden.png" },
                    ],
                    whitetea: [
                        { id: 11, name: "SILVER NEEDLE WHITE TEA", price: 30, image: "static/Silver_needle.png" },
                        { id: 12, name: "WHITE SILK WHITE TEA", price: 15, image: "static/White_Silk.png" },
                        { id: 13, name: "WHITE WINGS WHITE TEA", price: 18, image: "static/White_Wing.png" },
                    ],
                    herbaltea: [
                        { id: 14, name: "BALANCE HERBAL INFUSION", price: 15, image: "static/HerbalBalance.png" },
                        { id: 15, name: "ESCAPE TO NATURE HERBAL INFUSION", price: 15, image: "static/Escape.png" },
                        { id: 16, name: "SIMPLY TEA TOX HERBAL INFUSION", price: 12, image: "static/Simply_1.png" },
                        { id: 17, name: "WELL BEING HERBAL INFUSION", price: 15, image: "static/Wellbeing.png" },
                    ],
                    matchablends: [
                        { id: 18, name: "ORGANIC MATCHA PREMIUM JAPANESE GREEN TEA", price: 38, image: "static/MATCHA.png" },
                        { id: 19, name: "TURMERIC MATCHA", price: 15, image: "static/Turmeric_Matcha.png" },
                    ],
                    rooiboshoneybush: [
                        { id: 20, name: "HONEY BUSH", price: 15, image: "static/HoneyBush.png" },
                        { id: 21, name: "ROOIBOS BLOSSOM", price: 15, image: "static/Blossom.png" },
                        { id: 22, name: "SPICY ROOIBOS", price: 15, image: "static/SpicyRooibois.png" },
                    ],
                    fruitblends: [
                        { id: 23, name: "MIXED BERRIES FRUIT BLEND", price: 15, image: "static/mixed-berries.png" },
                    ],
                    premiumoolong: [
                        { id: 24, name: "ROYAL ORCHID PREMIUM OOLONG TEA", price: 30, image: "static/Royal_Orchid.png" },
                    ]
                };
            
                // Function to display items based on the category
                const displayItems = (category) => {
                    
                    sampleData[category].forEach(item => {
                        const card = document.createElement('div');
                        card.className = 'product-card';
            
                        const img = document.createElement('img');
                        img.src = item.image;
                        img.classList.add('tea-image');
            
                        img.addEventListener('click', () => {
                            fetch('./teatypes.JSON')
                                .then(response => response.json())
                                .then(sampleData2 => {
                                    for (const category2 in sampleData2) {
                                        sampleData2[category2].forEach(item2 => {
                                            if (item2.name.toLowerCase() === item.name.toLowerCase()) {
                                                localStorage.setItem('selectedTea', JSON.stringify(item2));
                                                window.location.href = 'item_view.html';
                                            }
                                        });
                                    }
                                })
                                .catch(error => {
                                    console.error("Error fetching JSON data:", error);
                                });
                        });
            
                        const title = document.createElement('h3');
                        title.textContent = item.name;
            
                        const price = document.createElement('p');
                        price.textContent = `$${item.price}`;
            
                        const button = document.createElement('button');
                        button.className = 'btn btn-primary';
                        button.textContent = 'Buy Now';
                        button.addEventListener('click', () => {
                            fetch('./teatypes.JSON')
                                .then(response => response.json())
                                .then(sampleData2 => {
                                    for (const category2 in sampleData2) {
                                        sampleData2[category2].forEach(item2 => {
                                            if (item2.name.toLowerCase() === item.name.toLowerCase()) {
                                                localStorage.setItem('selectedTea', JSON.stringify(item2));
                                                window.location.href = 'item_view.html';
                                            }
                                        });
                                    }
                                })
                                .catch(error => {
                                    console.error("Error fetching JSON data:", error);
                                });
                        });
            
                        card.appendChild(img);
                        card.appendChild(title);
                        card.appendChild(price);
                        card.appendChild(button);
                        contentDiv.appendChild(card);
                    });
                };
            
                allButton.addEventListener('click', () => {
                    contentDiv.innerHTML = '';
                    for (const category in sampleData) {
                        displayItems(category);
                    }
                });
                allButton.click();

                // Handle individual category buttons
                greenTea.addEventListener('click', () => {
                    console.log('Green Tea Button Clicked');
                    contentDiv.innerHTML = '';
                    displayItems('greentea');
                });
            
                whiteTea.addEventListener('click', () => {
                    console.log('White Tea Button Clicked');
                    contentDiv.innerHTML = '';
                    displayItems('whitetea');
                });
            
                blackTea.addEventListener('click', () => {
                    console.log('Black Tea Button Clicked');
                    contentDiv.innerHTML = '';
                    displayItems('blacktea');
                });
            
                herbalTea.addEventListener('click', () => {
                    console.log('Herbal Tea Button Clicked');
                    contentDiv.innerHTML = '';
                    displayItems('herbaltea');
                });
            
                matchaTea.addEventListener('click', () => {
                    console.log('Matcha Tea Button Clicked');
                    contentDiv.innerHTML = '';
                    displayItems('matchablends');
                });
            
                roobiosTea.addEventListener('click', () => {
                    console.log('Roobios Tea Button Clicked');
                    contentDiv.innerHTML = '';
                    displayItems('rooiboshoneybush');
                });
            
                fruitTea.addEventListener('click', () => {
                    console.log('Fruit Tea Button Clicked');
                    contentDiv.innerHTML = '';
                    displayItems('fruitblends');
                });
            
                premiumTea.addEventListener('click', () => {
                    console.log('Premium Tea Button Clicked');
                    contentDiv.innerHTML = '';
                    displayItems('premiumoolong');
                });

                const searchInput = document.querySelector('.search-input');

                searchInput.addEventListener('keydown', (event) => {
                    if (event.key === 'Enter') {
                        event.preventDefault(); // Prevent the default form submission
                        const query = searchInput.value.trim();
                        if (query) {
                            // Redirect to shop.html with the search query as a parameter
                            window.location.href = `shop.html?search=${encodeURIComponent(query)}`;
                        }
                    }
                });

                //getting inside the search text
                 
                const urlParams = new URLSearchParams(window.location.search);
                const search = urlParams.get('search');
                if (search) {
                    contentDiv.innerHTML = ''; // Clear previous content
            
                    // Update button classes
                    if (searchButton) {
                        searchButton.classList.add('selected'); // Assuming the search button has an id of 'searchButton'
                    }
                    allButton.classList.remove('selected');
            
                    // Iterate over the categories in sampleData
                    for (const category in sampleData) {
                        // Iterate over the items in each category
                        sampleData[category].forEach((item) => {
                            // Check if the item's name includes the search term
                            if (item.name.toUpperCase().includes(search.toUpperCase())) {
                                const card = document.createElement('div');
                                card.className = 'product-card';
            
                                const img = document.createElement('img');
                                img.src = item.image;
                                img.classList.add('tea-image');
            
                                img.addEventListener('click', () => {
                                    fetch('./teatypes.JSON')
                                        .then(response => response.json())
                                        .then(sampleData2 => {
                                            for (const category2 in sampleData2) {
                                                sampleData2[category2].forEach(item2 => {
                                                    if (item2.name.toLowerCase() === item.name.toLowerCase()) {
                                                        localStorage.setItem('selectedTea', JSON.stringify(item2));
                                                        window.location.href = 'item_view.html';
                                                    }
                                                });
                                            }
                                        })
                                        .catch(error => {
                                            console.error("Error fetching JSON data:", error);
                                        });
                                });
            
                                const title = document.createElement('h3');
                                title.textContent = item.name;
            
                                const price = document.createElement('p');
                                price.textContent = `$${item.price}`;
            
                                const button = document.createElement('button');
                                button.className = 'btn btn-primary';
                                button.textContent = 'Buy Now';
                                button.addEventListener('click', () => {
                                    fetch('./teatypes.JSON')
                                        .then(response => response.json())
                                        .then(sampleData2 => {
                                            for (const category2 in sampleData2) {
                                                sampleData2[category2].forEach(item2 => {
                                                    if (item2.name.toLowerCase() === item.name.toLowerCase()) {
                                                        localStorage.setItem('selectedTea', JSON.stringify(item2));
                                                        window.location.href = 'item_view.html';
                                                    }
                                                });
                                            }
                                        })
                                        .catch(error => {
                                            console.error("Error fetching JSON data:", error);
                                        });
                                });
            
                                card.appendChild(img);
                                card.appendChild(title);
                                card.appendChild(price);
                                card.appendChild(button);
                                contentDiv.appendChild(card);
                            }
                        });
                    }
                }

            });
            
        </script>


    </body>
</html>